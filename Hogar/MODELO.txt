<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cat√°logo de Productos</title>
    <style>
        :root {
            --bg-color: #1a1a1a;
            --card-bg: rgba(40, 40, 40, 0.8);
            --text-color: #f0f0f0;
            --accent-color: #4a9eff;
            --border-color: #444;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

  body {
        background: url('https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRw9KnHa4j8MdnLw5QzEjbQsRa8wr2PcWMX1w&s') no-repeat center center fixed;
        background-size: cover;
        color: #fff;
        line-height: 1.6;
        min-height: 100vh;
        padding: 20px;
        position: relative;
        overflow-x: hidden;
    }
    
    /* Capa oscura sobre la imagen de fondo */
    body::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(135deg, rgba(5, 5, 16, 0.85) 0%, rgba(10, 10, 26, 0.8) 100%);
        z-index: -1;
    }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 15px;
        }

        header {
            background-color: rgba(30, 30, 30, 0.9);
            padding: 15px 0;
            position: sticky;
            top: 0;
            z-index: 100;
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border-color);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--accent-color);
        }

        .search-container {
            flex: 1;
            max-width: 500px;
            margin: 0 20px;
        }

        .search-box {
            width: 100%;
            padding: 10px 15px;
            border-radius: 25px;
            border: 1px solid var(--border-color);
            background-color: rgba(60, 60, 60, 0.8);
            color: var(--text-color);
            font-size: 1rem;
            outline: none;
            transition: all 0.3s;
        }

        .search-box:focus {
            border-color: var(--accent-color);
            box-shadow: 0 0 0 2px rgba(74, 158, 255, 0.3);
        }

        .cart-icon {
            position: relative;
            cursor: pointer;
            font-size: 1.5rem;
            color: var(--text-color);
            transition: color 0.3s;
        }

        .cart-icon:hover {
            color: var(--accent-color);
        }

        .cart-count {
            position: absolute;
            top: -8px;
            right: -8px;
            background-color: var(--accent-color);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .product-card {
            background-color: var(--card-bg);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: transform 0.3s, box-shadow 0.3s;
            backdrop-filter: blur(5px);
            border: 1px solid var(--border-color);
        }

        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.4);
        }

        .product-image {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-bottom: 1px solid var(--border-color);
        }

        .product-info {
            padding: 15px;
        }

        .product-code {
            font-size: 0.8rem;
            color: #aaa;
            margin-bottom: 5px;
        }

        .product-name {
            font-size: 1rem;
            margin-bottom: 10px;
            height: 40px;
            overflow: hidden;
        }

        .product-price {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--accent-color);
            margin-bottom: 15px;
        }

        .quantity-controls {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .quantity-btn {
            background-color: rgba(74, 158, 255, 0.2);
            border: 1px solid var(--accent-color);
            color: var(--text-color);
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .quantity-btn:hover {
            background-color: rgba(74, 158, 255, 0.4);
        }

        .quantity-display {
            font-size: 1.1rem;
            font-weight: bold;
            margin: 0 10px;
        }

        .add-to-cart {
            width: 100%;
            padding: 10px;
            background-color: var(--accent-color);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s;
        }

        .add-to-cart:hover {
            background-color: #3a8eef;
        }

        /* Cart Modal */
        .cart-modal {
            position: fixed;
            top: 0;
            right: -100%;
            width: 100%;
            max-width: 400px;
            height: 100%;
            background-color: var(--bg-color);
            box-shadow: -5px 0 15px rgba(0, 0, 0, 0.5);
            transition: right 0.3s ease-in-out;
            z-index: 100001;
            display: flex;
            flex-direction: column;
        }

        .cart-modal.open {
            right: 0;
        }

        .cart-header {
            padding: 20px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .cart-title {
            font-size: 1.5rem;
            font-weight: bold;
        }

        .close-cart {
            background: none;
            border: none;
            color: var(--text-color);
            font-size: 1.5rem;
            cursor: pointer;
        }

        .cart-items {
            flex: 1;
            overflow-y: auto;
            padding: 10px;
        }

        .cart-item {
            display: flex;
            padding: 10px;
            border-bottom: 1px solid var(--border-color);
            margin-bottom: 10px;
            position: relative;
        }

        .cart-item-image {
            width: 60px;
            height: 60px;
            object-fit: cover;
            border-radius: 5px;
            margin-right: 10px;
        }

        .cart-item-details {
            flex: 1;
        }

        .cart-item-name {
            font-size: 0.9rem;
            margin-bottom: 5px;
        }

        .cart-item-price {
            font-size: 0.9rem;
            color: var(--accent-color);
        }

        .cart-item-quantity {
            display: flex;
            align-items: center;
            margin-top: 5px;
        }

        .cart-item-quantity button {
            background: none;
            border: 1px solid var(--border-color);
            color: var(--text-color);
            width: 25px;
            height: 25px;
            border-radius: 3px;
            cursor: pointer;
        }

        .cart-item-quantity span {
            margin: 0 10px;
        }

        .remove-item {
            position: absolute;
            top: 10px;
            right: 10px;
            color: #ff4d4d;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1.2rem;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s;
        }

        .remove-item:hover {
            background-color: rgba(255, 77, 77, 0.2);
        }

        .cart-footer {
            padding: 20px;
            border-top: 1px solid var(--border-color);
        }

        .cart-total {
            display: flex;
            justify-content: space-between;
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .send-whatsapp {
            width: 100%;
            padding: 12px;
            background-color: #25D366;
            color: white;
            border: none;
            border-radius: 5px;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 8px;
            transition: background-color 0.3s;
        }

        .send-whatsapp:hover {
            background-color: #20b858;
        }

        .overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 999;
            display: none;
        }

        .overlay.active {
            display: block;
        }

        .empty-cart {
            text-align: center;
            padding: 40px 20px;
            color: #888;
        }

        .notification {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background-color: var(--accent-color);
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            box-shadow: var(--shadow);
            opacity: 0;
            transition: opacity 0.3s;
            z-index: 1001;
        }

        .notification.show {
            opacity: 1;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 15px;
            }

            .search-container {
                margin: 0;
                width: 100%;
            }

            .products-grid {
                grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            }

            .cart-modal {
                max-width: 100%;
            }
        }

        @media (max-width: 480px) {
            .products-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="overlay" id="overlay"></div>
    <div class="notification" id="notification">Producto a√±adido al carrito</div>

    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">Cat√°logo AM</div>
                <div class="search-container">
                    <input type="text" class="search-box" id="searchBox" placeholder="Buscar productos...">
                </div>
                <div class="cart-icon" id="cartIcon">
                    üõí
                    <span class="cart-count" id="cartCount">0</span>
                </div>
            </div>
        </div>
    </header>

    <main class="container">
        <div class="products-grid" id="productsGrid">
            <!-- Los productos se cargar√°n aqu√≠ din√°micamente -->
        </div>
    </main>

    <div class="cart-modal" id="cartModal">
        <div class="cart-header">
            <h2 class="cart-title">Carrito de Compras</h2>
            <button class="close-cart" id="closeCart">‚úï</button>
        </div>
        <div class="cart-items" id="cartItems">
            <!-- Los productos del carrito se mostrar√°n aqu√≠ -->
        </div>
        <div class="cart-footer">
            <div class="cart-total">
                <span>Total:</span>
                <span id="cartTotal">$0.00</span>
            </div>
            <button class="send-whatsapp" id="sendWhatsApp">
                <span>Enviar Pedido por WhatsApp</span>
                <span>üì±</span>
            </button>
        </div>
    </div>

    <script>
        // Datos de productos con URLs de imagen diferentes
        const products = [


  {
    "code": "6852345547511",
    "name": "AM HIGH QUALITY MOSQUITO NET. MOSQUITERO",
    "price": 10.0,
    "image": "../catalogo/6852345547511.jpeg"
  },
  
{
  code: "HD1296", 
  name: "XS MAX TACOS PROTECTOR CH_CARCASA",
  price: 1.00,
  image: "../catalogo/HD1296.jpeg"
},
{
  code: "HD1401", 
  name: "XSMAX STAR - CARCASA",
  price: 1.00,
  image: "../catalogo/HD1401.jpeg"
}
 
 
 
        ];

        // Variables globales
        let cart = [];
        let filteredProducts = [...products];

        // Elementos DOM
        const productsGrid = document.getElementById('productsGrid');
        const cartIcon = document.getElementById('cartIcon');
        const cartCount = document.getElementById('cartCount');
        const cartModal = document.getElementById('cartModal');
        const closeCart = document.getElementById('closeCart');
        const overlay = document.getElementById('overlay');
        const cartItems = document.getElementById('cartItems');
        const cartTotal = document.getElementById('cartTotal');
        const sendWhatsApp = document.getElementById('sendWhatsApp');
        const searchBox = document.getElementById('searchBox');
        const notification = document.getElementById('notification');

        // Inicializar la aplicaci√≥n
        function init() {
            renderProducts();
            setupEventListeners();
            updateCartCount();
        }

        // Renderizar productos en la cuadr√≠cula
        function renderProducts() {
            productsGrid.innerHTML = '';
            
            filteredProducts.forEach(product => {
                const productCard = document.createElement('div');
                productCard.className = 'product-card';
                
                productCard.innerHTML = `
                    <img src="${product.image}" alt="${product.name}" class="product-image">
                    <div class="product-info">
                        <div class="product-code">${product.code}</div>
                        <div class="product-name">${product.name}</div>
                        <div class="product-price">$${product.price.toFixed(2)}</div>
                        <div class="quantity-controls">
                            <button class="quantity-btn minus" data-code="${product.code}">-</button>
                            <span class="quantity-display" id="quantity-${product.code}">1</span>
                            <button class="quantity-btn plus" data-code="${product.code}">+</button>
                        </div>
                        <button class="add-to-cart" data-code="${product.code}">A√±adir al Carrito</button>
                    </div>
                `;
                
                productsGrid.appendChild(productCard);
            });
            
            // Agregar event listeners a los botones de cantidad y a√±adir al carrito
            document.querySelectorAll('.quantity-btn.minus').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const code = e.target.dataset.code;
                    decreaseQuantity(code);
                });
            });
            
            document.querySelectorAll('.quantity-btn.plus').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const code = e.target.dataset.code;
                    increaseQuantity(code);
                });
            });
            
            document.querySelectorAll('.add-to-cart').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const code = e.target.dataset.code;
                    addToCart(code);
                });
            });
        }

        // Configurar event listeners
        function setupEventListeners() {
            cartIcon.addEventListener('click', openCart);
            closeCart.addEventListener('click', closeCartModal);
            overlay.addEventListener('click', closeCartModal);
            sendWhatsApp.addEventListener('click', sendToWhatsApp);
            searchBox.addEventListener('input', filterProducts);
        }

        // Filtrar productos seg√∫n la b√∫squeda
        function filterProducts() {
            const searchTerm = searchBox.value.toLowerCase();
            filteredProducts = products.filter(product => 
                product.name.toLowerCase().includes(searchTerm) || 
                product.code.toLowerCase().includes(searchTerm)
            );
            renderProducts();
        }

        // Aumentar cantidad de un producto
        function increaseQuantity(code) {
            const quantityDisplay = document.getElementById(`quantity-${code}`);
            let quantity = parseInt(quantityDisplay.textContent);
            quantityDisplay.textContent = quantity + 1;
        }

        // Disminuir cantidad de un producto
        function decreaseQuantity(code) {
            const quantityDisplay = document.getElementById(`quantity-${code}`);
            let quantity = parseInt(quantityDisplay.textContent);
            if (quantity > 1) {
                quantityDisplay.textContent = quantity - 1;
            }
        }

        // A√±adir producto al carrito
        function addToCart(code) {
            const product = products.find(p => p.code === code);
            const quantityDisplay = document.getElementById(`quantity-${code}`);
            const quantity = parseInt(quantityDisplay.textContent);
            
            // Verificar si el producto ya est√° en el carrito
            const existingItemIndex = cart.findIndex(item => item.code === code);
            
            if (existingItemIndex !== -1) {
                // Si ya existe, actualizar la cantidad
                cart[existingItemIndex].quantity += quantity;
            } else {
                // Si no existe, agregar nuevo elemento
                cart.push({
                    code: product.code,
                    name: product.name,
                    price: product.price,
                    quantity: quantity,
                    image: product.image
                });
            }
            
            // Restablecer cantidad a 1
            quantityDisplay.textContent = '1';
            
            // Actualizar contador del carrito
            updateCartCount();
            
            // Mostrar notificaci√≥n
            showNotification(`Se a√±adieron ${quantity} ${product.name} al carrito`);
        }

        // Mostrar notificaci√≥n
        function showNotification(message) {
            notification.textContent = message;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 2000);
        }

        // Actualizar contador del carrito
        function updateCartCount() {
            const totalItems = cart.reduce((total, item) => total + item.quantity, 0);
            cartCount.textContent = totalItems;
        }

        // Abrir modal del carrito
        function openCart() {
            renderCartItems();
            cartModal.classList.add('open');
            overlay.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        // Cerrar modal del carrito
        function closeCartModal() {
            cartModal.classList.remove('open');
            overlay.classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        // Renderizar elementos del carrito
        function renderCartItems() {
            cartItems.innerHTML = '';
            
            if (cart.length === 0) {
                cartItems.innerHTML = '<div class="empty-cart">El carrito est√° vac√≠o</div>';
                cartTotal.textContent = '$0.00';
                return;
            }
            
            let total = 0;
            
            cart.forEach((item, index) => {
                const itemTotal = item.price * item.quantity;
                total += itemTotal;
                
                const cartItem = document.createElement('div');
                cartItem.className = 'cart-item';
                
                cartItem.innerHTML = `
                    <img src="${item.image}" alt="${item.name}" class="cart-item-image">
                    <div class="cart-item-details">
                        <div class="cart-item-name">${item.name}</div>
                        <div class="cart-item-price">$${item.price.toFixed(2)}</div>
                        <div class="cart-item-quantity">
                            <button class="decrease" data-index="${index}">-</button>
                            <span>${item.quantity}</span>
                            <button class="increase" data-index="${index}">+</button>
                        </div>
                    </div>
                    <button class="remove-item" data-index="${index}">üóëÔ∏è</button>
                `;
                
                cartItems.appendChild(cartItem);
            });
            
            // Actualizar total
            cartTotal.textContent = `$${total.toFixed(2)}`;
            
            // Agregar event listeners a los botones del carrito
            document.querySelectorAll('.cart-item-quantity .decrease').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const index = parseInt(e.target.dataset.index);
                    decreaseCartItemQuantity(index);
                });
            });
            
            document.querySelectorAll('.cart-item-quantity .increase').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const index = parseInt(e.target.dataset.index);
                    increaseCartItemQuantity(index);
                });
            });
            
            document.querySelectorAll('.remove-item').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const index = parseInt(e.target.dataset.index);
                    removeCartItem(index);
                });
            });
        }

        // Disminuir cantidad de un elemento en el carrito
        function decreaseCartItemQuantity(index) {
            if (cart[index].quantity > 1) {
                cart[index].quantity--;
                renderCartItems();
                updateCartCount();
            }
        }

        // Aumentar cantidad de un elemento en el carrito
        function increaseCartItemQuantity(index) {
            cart[index].quantity++;
            renderCartItems();
            updateCartCount();
        }

        // Eliminar elemento del carrito
        function removeCartItem(index) {
            cart.splice(index, 1);
            renderCartItems();
            updateCartCount();
        }

        // Enviar pedido por WhatsApp - FUNCI√ìN CORREGIDA
        function sendToWhatsApp() {
            if (cart.length === 0) {
                showNotification('El carrito est√° vac√≠o');
                return;
            }
            
            const phoneNumber = '593986122265';
            
            // Crear mensaje detallado
            let message = 'üõí *NUEVO PEDIDO* üõí%0A%0A';
            message += 'Hola, tengo un nuevo pedido:%0A%0A';
            message += 'üìã *DETALLE DEL PEDIDO:*%0A%0A';
            
            // Agregar productos en orden numerado
            cart.forEach((item, index) => {
                const subtotal = item.price * item.quantity;
                message += `*${index + 1}. ${item.name}*%0A`;
                message += `   üì¶ C√≥digo: ${item.code}%0A`;
                message += `   üî¢ Cantidad: ${item.quantity}%0A`;
                message += `   üí∞ Precio unitario: $${item.price.toFixed(2)}%0A`;
                message += `   üßÆ Subtotal: $${subtotal.toFixed(2)}%0A%0A`;
            });
            
            // Calcular total
            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            
            message += '‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ%0A';
            message += `üí∞ *TOTAL DEL PEDIDO: $${total.toFixed(2)}*%0A`;
            message += '‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ%0A%0A';
            message += 'üìû *Cliente espera confirmaci√≥n*%0A';
            message += '‚è∞ *Por favor confirmar disponibilidad*%0A%0A';
            message += '¬°Gracias! üôè';
            
            // URL de WhatsApp universal que funciona en todos los dispositivos
            const whatsappUrl = `https://wa.me/${phoneNumber}?text=${message}`;
            
            // Abrir WhatsApp - funciona con un solo click
            window.open(whatsappUrl, '_blank');
            
            // Mostrar confirmaci√≥n
            showNotification('Abriendo WhatsApp...');
            
            // Cerrar el carrito despu√©s de enviar
            setTimeout(() => {
                closeCartModal();
            }, 1000);
        }

        // Inicializar la aplicaci√≥n
        init();
    </script>
</body>
</html>